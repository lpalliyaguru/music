<?php
$urls = ["http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/anjanam-deviye/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/anjanam-deviye/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/asata-asuwana-maime/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/atheethaya-sihinayak-pamanai/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/hada-wela-yaman-pane/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/la-dalu-bopath/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/mahagedara/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/marathondiya-rata/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/me-tharam-kandulu-wel/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/oba-ma-hamu-una-me-ira-handa-yata/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/obe-sewana-mata-niwanak/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/pinsara-oba-hera/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/asata-asuwana-maime/shanthini-thema-wetei/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/adaraya-sundara-waradaki/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/adaraya-sundara-waradaki/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/andara-yaye-waw-thawalle/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/andara-yaye-waw-thawalle/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/daskon-pramila/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/daskon-pramila/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/duru-kathara-gewagena/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/duru-kathara-gewagena/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/gamata-kalin-hiru/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/gamata-kalin-hiru/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/mala-giraviye/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/mala-giraviye/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/mudu-muhune-suwa-danune-karunarathna-divulgane/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/mudu-muhune-suwa-danune-karunarathna-divulgane/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/oba-dannawanam/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/oba-dannawanam/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/pini-podak/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/pini-podak/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/pivithuruya-palamu-pema/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/pivithuruya-palamu-pema/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/premaye-aswenna/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/premaye-aswenna/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/rathnavallee/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/rathnavallee/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/sudu-pata-mal/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/sudu-pata-mal/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/sulanga-numba-wage/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/sulanga-numba-wage/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/thalam-kithulata-mala/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/thalam-kithulata-mala/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/virajini/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/virajini/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/yamu-sella-katharagama/", "http://www.sinhalasongs.lk/sinhala-songs-download/karunarathna-divulgane/nil-diyawara/yamu-sella-katharagama/"];
$list = array();
foreach($urls as $index => $url) {
	echo "Reading  " . $url . PHP_EOL;
	$matches = null;
	$html = file_get_contents($url);
	$link = preg_match('/<a href="http:\/\/sinhalasongs.lk\/sinhala_mp3\/Karunarathna-Divulgane\/[a-zA-Z0-9\s]+\/([a-zA-Z0-9\s]+)?.mp3/', $html, $matches);
	
	if(isset($matches[0])) {
		$mp3 = substr($matches[0], 9);
		echo "Downloading " . $mp3 . PHP_EOL;
		$fileName = isset($matches[1]) ? $matches[1] : 'rename-me-' . $index . '.mp3';
		
		$file = file_get_contents(file_url($mp3));
		file_put_contents('mp3/' . $fileName. '.mp3' , $file);
		echo "Downloaded " . $mp3 . PHP_EOL;
	}
	
	
}

function file_url($url){
  $parts = parse_url($url);
  $path_parts = array_map('rawurldecode', explode('/', $parts['path']));

  return
    $parts['scheme'] . '://' .
    $parts['host'] .
    implode('/', array_map('rawurlencode', $path_parts))
  ;
}
